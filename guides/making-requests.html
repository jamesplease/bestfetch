<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/bestfetch/_next/static/css/268705a525518e6c04f3.css" as="style"/><link rel="stylesheet" href="/bestfetch/_next/static/css/268705a525518e6c04f3.css"/><link rel="preload" href="/bestfetch/_next/static/fohnfYZ5FwkjnZR3FG2tL/pages/guides/making-requests.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/fohnfYZ5FwkjnZR3FG2tL/pages/_app.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/chunks/framework.4503cc20512dbab0b6d3.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/chunks/75005d67dcfe361c2154e60a2d01b5712ea6b98c.76bffe1d03cfd3ccc666.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/chunks/1cc9c8ac2642f0ce333c08f2fa386ddf1c4b6569.86c80abb9654a2542c0f.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/runtime/main-e9237324bed21a54c1bb.js" as="script"/></head><title>⭐️bestfetch ⭐️</title><body><div id="__next"><header class="header_header__3w6qi"><a class="header_logo__25JoG" href="/bestfetch/">⭐️ bestfetch</a><a class="header_githubLink__1pmaw" href="https://github.com/jamesplease/bestfetch">GitHub</a></header><div><nav class="nav_nav__2DIZA"><ul class="nav_navList__1XQQy"><li class="nav_navListItem__2RyNo"><a class="nav_navSectionLink__1KpdU" href="/bestfetch/">Home</a></li><li class="nav_navListItem__2RyNo"><a class="nav_navSectionLink__1KpdU" href="/bestfetch/getting-started">Getting Started</a></li><li class="nav_navListItem__2RyNo"><a class="nav_navSectionLink__1KpdU" href="/bestfetch/guides">Guides</a><ul class="nav_navSubList__1sPlE"><li><a class="nav_navLink__1mlDR activeNavLink" href="/bestfetch/guides/making-requests">Making Requests</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/guides/caching-responses">Caching Responses</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/guides/invalidating-the-cache">Invalidating the Cache</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/guides/deduplicating-requests">Deduplicating Requests</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/guides/identical-requests">Identical Requests</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/guides/other-response-types">Other Response Types</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/guides/faq">FAQ</a></li></ul></li><li class="nav_navListItem__2RyNo"><a class="nav_navSectionLink__1KpdU" href="/bestfetch/api-reference">API</a><ul class="nav_navSubList__1sPlE nav_navApiSubList__15FUT"><li><a class="nav_navLink__1mlDR" href="/bestfetch/api-reference/bestfetch">bestfetch()</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/api-reference/response-cache">responseCache</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/api-reference/cache-miss-error">CacheMissError</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/api-reference/active-requests">activeRequests</a></li><li><a class="nav_navLink__1mlDR" href="/bestfetch/api-reference/get-request-key">getRequestKey()</a></li></ul></li></ul></nav><div class="app_bodyContents__1IGMp"><div class="page"><h1>Making Requests</h1><p>This guide will cover how to configure requests as well as how to handle the responses that you receive.</p><p>To begin, import the <code>bestfetch</code> function:</p><pre class="lowlight"><code class="hljs js"><span class="hljs-keyword">import</span> { bestfetch } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bestfetch&#x27;</span>;</code></pre><h2>Configuring Requests</h2><p><code>bestfetch</code> supports all of the same options as<!-- --> <code>fetch</code>.</p><p>In fact, because bestfetch is a lightweight wrapper around fetch, it can be beneficial for you to be familiar with that API. If you&#x27;re new to fetch, you may wish to read the<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">Using Fetch guide on MDN</a>.</p><h3>Specifying the URL</h3><p>You can pass a URL as the first argument, or you can pass an<!-- --> <code>options</code> object and specify the URL there. URLs can be both absolute or relative.</p><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>)
  .then(handleResponse);

bestfetch({
  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/api/books/2&#x27;</span>
})
  .then(handleResponse);</code></pre><h3>Specifying the HTTP Method</h3><p>Pass the <code>method</code> option. For instance, to make a<!-- --> <code>POST</code> request:</p><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>
})
  .then(handleResponse);</code></pre><p>The <code>method</code> option is case-insensitive, so either<!-- --> <code>&quot;POST&quot;</code> and <code>&quot;post&quot;</code> will work.</p><h3>Sending Data in the Request Body</h3><p>Use the <code>body</code> option to send data to the server. To do this, stringify your data and pass the correct headers so that the server knows how to parse the data:</p><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify(data),
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>
  }
})
  .then(handleResponse);</code></pre><h3>Sending Query Parameters</h3><p>Include query parameters in the <code>url</code>.</p><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;/api/books?sort=author&#x27;</span>)
  .then(handleResponse);</code></pre><p>You may find it preferable to use a library that stringifies query parameters from an object. The following example shows how you can use<!-- --> <code>bestfetch</code> with<!-- --> <a href="https://github.com/sindresorhus/query-string"><code>query-string</code></a>:</p><pre class="lowlight"><code class="hljs js"><span class="hljs-keyword">import</span> queryString <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;query-string&#x27;</span>;

<span class="hljs-keyword">const</span> qs = queryString.stringify({ <span class="hljs-attr">sort</span>: <span class="hljs-string">&#x27;author&#x27;</span> });

bestfetch(<span class="hljs-string">`/api/books?<span class="hljs-subst">${qs}</span>`</span>)
  .then(handleResponse);</code></pre><h3>Configuring the Caching Behavior</h3><p><code>bestfetch</code> will intelligently cache your responses to reduce network requests. Refer to the guide on<!-- --> <a href="/bestfetch/guides/caching-responses">Caching Responses</a> <!-- -->to learn how to configure this behavior.</p><h3>Other Options</h3><p><code>bestfetch</code> supports all of the same options as<!-- --> <code>fetch</code>, including:</p><ul><li><code>method</code></li><li><code>headers</code></li><li><code>body</code></li><li><code>mode</code></li><li><code>credentials</code></li><li><code>cache</code> <i>(note: this is unrelated to the caching system of bestfetch)</i></li><li><code>redirect</code></li><li><code>referrer</code></li><li><code>referrerPolicy</code></li><li><code>integrity</code></li><li><code>keepalive</code></li><li><code>signal</code></li></ul><p>So far, this guide has covered the most commonly-used options. For more information on these other options, refer to<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch">the <code>fetch()</code> documentation</a> <!-- -->on MDN.</p><p>In addition to the options that come from <code>fetch</code>, there are additional options introduced in bestfetch. These are used for the caching and deduplication features.</p><ul><li><code>cachePolicy</code>: Controls the caching behavior. Learn more in the<!-- --> <a href="/bestfetch/guides/caching-responses">caching guide</a>.</li><li><code>dedupe</code>: Whether or not to dedupe this request. Learn more in the<!-- --> <a href="/bestfetch/guides/deduplicating-requests">deduplication guide</a>.</li><li><code>responseType</code>. Use this option when making requests to endpoints that do not return JSON. Learn more<!-- --> <a href="/bestfetch/guides/other-response-types">here</a>.</li><li><code>requestKey</code>. An advanced option that is used to determine which requests are identical. You probably won&#x27;t need this. Learn more in the<!-- --> <a href="/bestfetch/guides/deduplicating-requests">deduplication guide</a>.</li></ul><h2>Receiving Responses</h2><p><code>bestfetch</code> returns a Promise. This Promise resolves if a response from the server or cache is received, and it rejects otherwise.</p><h3>Successful Respones</h3><p>When a response is successful you can access the data from the response on <code>res.data</code>.</p><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>)
  .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Got the data&#x27;</span>, res.data);
  });</code></pre><h3>Errors</h3><p>If the server replies with an error response, then the Promise will still resolve. This is important to note, because it may be unexpected.</p><p>If your server returns HTTP status codes that are greater than or equal to 400 when there are errors, then you can check for server errors with the following code:</p><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>)
  .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (res.ok) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The request was successful&#x27;</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The request was unsuccessful.&#x27;</span>);
    }
  });</code></pre><p>If no response is received, then the promise will reject.</p><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>)
  .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Another kind of error occurred.&#x27;</span>, err);
  });</code></pre><p>The Promise will also reject with a<!-- --> <a href="/bestfetch/api-reference/cache-miss-error">CacheMissError</a> <!-- -->if the <code>cachePolicy</code> of the request is set to<!-- --> <code>&quot;cache-only&quot;</code> and nothing was found in the cache.</p><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>, {
  <span class="hljs-attr">cachePolicy</span>: <span class="hljs-string">&#x27;cache-only&#x27;</span>
})
  .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (err <span class="hljs-keyword">instanceof</span> CacheMissError) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;This request did not have a response in the cache.&#x27;</span>);
    }
  });</code></pre><h2>Trying It Out</h2><p>This webpage has <code>bestfetch</code> available on the window for you to use. You can try it out by making requests to<!-- --> <a href="https://jsonplaceholder.typicode.com/">the JSON Placeholder API</a>.</p><p>Here are a few examples to get you started.</p><h3>Fetching a Resource</h3><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>)
  .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Got the todo&#x27;</span>, res.data);
  });</code></pre><h3>Creating a Resource</h3><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/posts&#x27;</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({
      <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;My first post&#x27;</span>,
      <span class="hljs-attr">body</span>: <span class="hljs-string">&#x27;This is a draft post.&#x27;</span>,
      <span class="hljs-attr">userId</span>: <span class="hljs-number">1</span>
    }),
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&quot;Content-type&quot;</span>: <span class="hljs-string">&quot;application/json; charset=UTF-8&quot;</span>
    }
  })
  .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Created:&#x27;</span>, res.data));</code></pre><h3>Updating a Resource</h3><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;put&#x27;</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({
      <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;foo&#x27;</span>,
      <span class="hljs-attr">body</span>: <span class="hljs-string">&#x27;bar&#x27;</span>,
      <span class="hljs-attr">userId</span>: <span class="hljs-number">1</span>
    }),
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&quot;Content-type&quot;</span>: <span class="hljs-string">&quot;application/json; charset=UTF-8&quot;</span>
    }
  })
  .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Updated:&#x27;</span>, res.data));</code></pre><h3>Deleting a Resource</h3><pre class="lowlight"><code class="hljs js">bestfetch(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;delete&#x27;</span>
})</code></pre><h3>Other Examples</h3><p>Check out<!-- --> <a href="https://jsonplaceholder.typicode.com/guide.html">the JSON Placeholder examples</a> <!-- -->for more inspiration.</p></div><footer class="footer_footer__1tNtI"><span class="footer_footer_licenseText__1WWRm">bestfetch is licensed under the<!-- --> <a href="https://github.com/jamesplease/bestfetch/blob/master/LICENSE" class="footer_footer_licenseLink__dv4-a">MIT License</a>.</span><span class="footer_footer_licenseTextShort__3u4Up"><i class="zmdi zmdi-globe footer_icon"></i><a href="https://github.com/jamesplease/bestfetch/blob/master/LICENSE" class="footer_licenseLink footer_licenseLink-short">MIT License</a></span><a class="footer_footer_githubLink__U0tlu" href="https://github.com/jamesplease/bestfetch"><i class="zmdi zmdi-github footer_icon"></i> <span>View Project on GitHub</span></a></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/guides/making-requests","query":{},"buildId":"fohnfYZ5FwkjnZR3FG2tL","assetPrefix":"/bestfetch","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/bestfetch/_next/static/runtime/polyfills-7db8ae5a1cf376e637ae.js"></script><script async="" data-next-page="/guides/making-requests" src="/bestfetch/_next/static/fohnfYZ5FwkjnZR3FG2tL/pages/guides/making-requests.js"></script><script async="" data-next-page="/_app" src="/bestfetch/_next/static/fohnfYZ5FwkjnZR3FG2tL/pages/_app.js"></script><script src="/bestfetch/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" async=""></script><script src="/bestfetch/_next/static/chunks/framework.4503cc20512dbab0b6d3.js" async=""></script><script src="/bestfetch/_next/static/chunks/75005d67dcfe361c2154e60a2d01b5712ea6b98c.76bffe1d03cfd3ccc666.js" async=""></script><script src="/bestfetch/_next/static/chunks/1cc9c8ac2642f0ce333c08f2fa386ddf1c4b6569.86c80abb9654a2542c0f.js" async=""></script><script src="/bestfetch/_next/static/runtime/main-e9237324bed21a54c1bb.js" async=""></script><script src="/bestfetch/_next/static/fohnfYZ5FwkjnZR3FG2tL/_buildManifest.js" async=""></script><script src="/bestfetch/_next/static/fohnfYZ5FwkjnZR3FG2tL/_ssgManifest.js" async=""></script></body></html>