<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/bestfetch/_next/static/css/0aedd530d204d67cfbf7.css" as="style"/><link rel="stylesheet" href="/bestfetch/_next/static/css/0aedd530d204d67cfbf7.css"/><link rel="preload" href="/bestfetch/_next/static/77glpLnh6JRzH86eR0o5O/pages/guides/making-requests.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/77glpLnh6JRzH86eR0o5O/pages/_app.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/chunks/framework.0f140d5eb2070c7e423d.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/chunks/855ff82886e476302cbd6336c7415232161ce231.791b498134cdc2a7a939.js" as="script"/><link rel="preload" href="/bestfetch/_next/static/runtime/main-e4a01d99b8fccd2e3386.js" as="script"/></head><title>⭐️bestfetch ⭐️</title><body><div id="__next"><header class="header_header__3w6qi"><a class="header_logo__25JoG" href="/bestfetch/">⭐️ bestfetch</a><a class="header_githubLink__1pmaw" href="https://github.com/jamesplease/bestfetch">GitHub</a></header><div><nav class="nav_nav__2DIZA"><ul class="nav_navList__1XQQy"><li class="nav_navListItem__2RyNo"><a class="nav_navSectionLink__1KpdU" href="/">Home</a></li><li class="nav_navListItem__2RyNo"><a class="nav_navSectionLink__1KpdU" href="/getting-started">Getting Started</a></li><li class="nav_navListItem__2RyNo"><a class="nav_navSectionLink__1KpdU" href="/guides">Guides</a><ul class="nav_navSubList__1sPlE"><li><a class="nav_navLink__1mlDR activeNavLink" href="/guides/making-requests">Making Requests</a></li><li><a class="nav_navLink__1mlDR" href="/guides/caching-responses">Caching Responses</a></li><li><a class="nav_navLink__1mlDR" href="/guides/invalidating-the-cache">Invalidating the Cache</a></li><li><a class="nav_navLink__1mlDR" href="/guides/deduplicating-requests">Deduplicating Requests</a></li><li><a class="nav_navLink__1mlDR" href="/guides/other-response-types">Other Response Types</a></li><li><a class="nav_navLink__1mlDR" href="/guides/faq">FAQ</a></li></ul></li><li class="nav_navListItem__2RyNo"><a class="nav_navSectionLink__1KpdU" href="/docs">API</a><ul class="nav_navSubList__1sPlE nav_navApiSubList__15FUT"><li><a class="nav_navLink__1mlDR" href="/docs/bestfetch">bestfetch()</a></li><li><a class="nav_navLink__1mlDR" href="/docs/response-cache">responseCache</a></li><li><a class="nav_navLink__1mlDR" href="/docs/active-requests">activeRequests</a></li><li><a class="nav_navLink__1mlDR" href="/docs/cache-miss-error">CacheMissError</a></li><li><a class="nav_navLink__1mlDR" href="/docs/get-request-key">getRequestKey()</a></li></ul></li></ul></nav><div class="app_bodyContents__1IGMp"><div class="page"><h1>Making Requests</h1><p>This guide will cover how to configure requests as well as how to handle the responses that you receive.</p><p>To begin, import the <code>bestfetch</code> function:</p><code class="codeBlock">import { bestfetch } from &#x27;bestfetch&#x27;;</code><h2>Configuring Requests</h2><p><code>bestfetch</code> supports all of the same options as<!-- --> <code>fetch</code>.</p><h3>Specifying the URL</h3><p>You can pass a URL as the first argument, or you can pass an<!-- --> <code>options</code> object and specify the URL there. URLs can be both absolute or relative.</p><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;)
  .then(handleResponse);

bestfetch({
  url: &#x27;/api/books/2&#x27;
})
  .then(handleResponse);</code><p>Similarly to <code>fetch()</code>, you may also use <code>uri</code> <!-- -->instead of <code>url</code> in the options.</p><h3>Specifying the Method</h3><p>Pass the <code>method</code> option. For instance, to make a<!-- --> <code>POST</code> request:</p><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;, {
  method: &#x27;post&#x27;
})
  .then(handleResponse);</code><p>The <code>method</code> option is case-insensitive.</p><h3>Sending Data in the Request Body</h3><p>Use the <code>body</code> option to send data to the server. To do this, stringify your data and pass the correct headers so that the server knows how to interpret the data:</p><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;, {
  method: &#x27;post&#x27;,
  body: JSON.stringify(data),
  headers: {
    &#x27;Content-Type&#x27;: &#x27;application/json&#x27;
  }
})
  .then(handleResponse);</code><h3>Sending Query Parameters</h3><p>Include query parameters in the <code>url</code>.</p><code class="codeBlock">bestfetch(&#x27;/api/books/2?sort=author&#x27;)
  .then(handleResponse);</code><p>You may find it preferable to use a library that stringifies query parameters from an object. The following example shows how you can use<!-- --> <code>bestfetch</code> with<!-- --> <a href="https://github.com/sindresorhus/query-string"><code>query-string</code></a>:</p><code class="codeBlock">import queryString from &#x27;query-string&#x27;;

const qs = queryString.stringify({ sort: &#x27;author&#x27; });

bestfetch(`/api/books/2?${qs}`)
  .then(handleResponse);</code><h3>Configuring the Caching Behavior</h3><p><code>bestfetch</code> will intelligently cache your responses to reduce network requests. Refer to the guide on<!-- --> <a href="/guides/caching-responses">Caching Responses</a> <!-- -->to learn how to configure this behavior.</p><h3>Other Options</h3><p><code>bestfetch</code> supports all of the same options as<!-- --> <code>fetch</code>, including:</p><ul><li><code>method</code></li><li><code>headers</code></li><li><code>body</code></li><li><code>mode</code></li><li><code>credentials</code></li><li><code>cache</code> <i>(note: this is not unrelated to the caching system of bestfetch)</i></li><li><code>redirect</code></li><li><code>referrer</code></li><li><code>referrerPolicy</code></li><li><code>integrity</code></li><li><code>keepalive</code></li><li><code>signal</code></li></ul><p>So far, this guide has covered the most commonly-used options. For more information on the other options, refer to<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch">the <code>fetch()</code> documentation</a> <!-- -->on MDN.</p><h2>Receiving Responses</h2><p><code>bestfetch</code> returns a Promise. This Promise resolves if a response from the server is received, or if a cached value exists, and it rejects otherwise.</p><h3>Successful Respones</h3><p>When a response is successful you can access the data from the response on <code>res.data</code>.</p><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;)
  .then(res =&gt; {
    console.log(&#x27;Got the data&#x27;, res.data);
  });</code><h3>Errors</h3><p>If the server replies with an error response, then the Promise will still resolve. This may be unexpected. If your server utilizes HTTP status codes, then you can check for server errors with the following code:</p><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;)
  .then(res =&gt; {
    if (res.ok) {
      console.log(&#x27;The request was successful&#x27;);
    } else {
      console.log(&#x27;The request was unsuccessful.&#x27;);
    }
  });</code><p>If no response is received, then the promise will reject.</p><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;)
  .catch(err =&gt; {
    console.log(&#x27;Another kind of error occurred.&#x27;, err);
  });</code><p>The Promise will also reject with a<!-- --> <a href="/api/cachemisserror">CacheMissError</a> <!-- -->if the <code>cachePolicy</code> of the request is set to<!-- --> <code>&quot;cache-only&quot;</code> and nothing was found in the cache.</p><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;, {
  cachePolicy: &#x27;cache-only&#x27;
})
  .catch(err =&gt; {
    if (typeof err === CacheMissError) {
      console.log(&#x27;This request did not having a response in the cache.&#x27;);
    }
  });</code><h2>Trying It Out</h2><p>This webpage has <code>bestfetch</code> available on the window for you to use. Go ahead and to try out making requests with<!-- --> <a href="https://jsonplaceholder.typicode.com/">the JSON Placeholder API</a>!</p><p>Here are a few examples to get you started.</p><h3>Fetching a Resource</h3><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;)
  .then(res =&gt; {
    console.log(&#x27;Got the todo&#x27;, res.data);
  });</code><h3>Creating a Resource</h3><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/posts&#x27;, {
    method: &#x27;post&#x27;,
    body: JSON.stringify({
      title: &#x27;My first post&#x27;,
      body: &#x27;This is a draft post.&#x27;,
      userId: 1
    }),
    headers: {
      &quot;Content-type&quot;: &quot;application/json; charset=UTF-8&quot;
    }
  })
  .then(res =&gt; console.log(&#x27;Created:&#x27;, res.data));</code><h3>Updating a Resource</h3><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;, {
    method: &#x27;put&#x27;,
    body: JSON.stringify({
      id: 1,
      title: &#x27;foo&#x27;,
      body: &#x27;bar&#x27;,
      userId: 1
    }),
    headers: {
      &quot;Content-type&quot;: &quot;application/json; charset=UTF-8&quot;
    }
  })
  .then(res =&gt; console.log(&#x27;Updated:&#x27;, res.data));</code><h3>Deleting a Resource</h3><code class="codeBlock">bestfetch(&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;, {
  method: &#x27;delete&#x27;
})</code><h3>Other Examples</h3><p>Check out<!-- --> <a href="https://jsonplaceholder.typicode.com/guide.html">the JSON Placeholder examples</a> <!-- -->for more inspiration.</p></div><footer class="footer_footer__1tNtI"><span class="footer_footer_licenseText__1WWRm">bestfetch is licensed under the<!-- --> <a href="https://github.com/jamesplease/materialish/blob/master/LICENSE" class="footer_footer_licenseLink__dv4-a">MIT License</a>.</span><span class="footer_footer_licenseTextShort__3u4Up"><i class="zmdi zmdi-globe footer_icon"></i><a href="https://github.com/jamesplease/materialish/blob/master/LICENSE" class="footer_licenseLink footer_licenseLink-short">MIT License</a></span><a class="footer_footer_githubLink__U0tlu" href="https://github.com/jamesplease/materialish"><i class="zmdi zmdi-github footer_icon"></i> <span>View Project on GitHub</span></a></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/guides/making-requests","query":{},"buildId":"77glpLnh6JRzH86eR0o5O","assetPrefix":"/bestfetch","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/bestfetch/_next/static/runtime/polyfills-7703d2b6230c0bcac7e3.js"></script><script async="" data-next-page="/guides/making-requests" src="/bestfetch/_next/static/77glpLnh6JRzH86eR0o5O/pages/guides/making-requests.js"></script><script async="" data-next-page="/_app" src="/bestfetch/_next/static/77glpLnh6JRzH86eR0o5O/pages/_app.js"></script><script src="/bestfetch/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" async=""></script><script src="/bestfetch/_next/static/chunks/framework.0f140d5eb2070c7e423d.js" async=""></script><script src="/bestfetch/_next/static/chunks/855ff82886e476302cbd6336c7415232161ce231.791b498134cdc2a7a939.js" async=""></script><script src="/bestfetch/_next/static/runtime/main-e4a01d99b8fccd2e3386.js" async=""></script><script src="/bestfetch/_next/static/77glpLnh6JRzH86eR0o5O/_buildManifest.js" async=""></script><script src="/bestfetch/_next/static/77glpLnh6JRzH86eR0o5O/_ssgManifest.js" async=""></script></body></html>