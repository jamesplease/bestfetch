(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{YFqc:function(e,t,n){e.exports=n("cTJO")},bgQO:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/other-response-types",function(){return n("woBH")}])},cTJO:function(e,t,n){"use strict";var o=n("lwsE"),r=n("W8MJ"),s=n("a1gu"),l=n("Nsbk"),a=n("7W2i"),i=n("TqRt"),u=n("284h");t.__esModule=!0,t.default=void 0;var p,c=u(n("q1tI")),f=n("QmWs"),h=n("g/15"),d=i(n("nOHt"));function v(e){return e&&"object"===typeof e?(0,h.formatWithValidation)(e):e}var m=new Map,y=window.IntersectionObserver,b={};function w(){return p||(y?p=new y((function(e){e.forEach((function(e){if(m.has(e.target)){var t=m.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(p.unobserve(e.target),m.delete(e.target),t())}}))}),{rootMargin:"200px"}):void 0)}var g=function(e){function t(e){var n;return o(this,t),(n=s(this,l(t).call(this,e))).p=void 0,n.cleanUpListeners=function(){},n.formatUrls=function(e){var t=null,n=null,o=null;return function(r,s){if(o&&r===t&&s===n)return o;var l=e(r,s);return t=r,n=s,o=l,l}}((function(e,t){return{href:v(e),as:t?v(t):t}})),n.linkClicked=function(e){var t=e.currentTarget,o=t.nodeName,r=t.target;if("A"!==o||!(r&&"_self"!==r||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&2===e.nativeEvent.which)){var s=n.formatUrls(n.props.href,n.props.as),l=s.href,a=s.as;if(function(e){var t=(0,f.parse)(e,!1,!0),n=(0,f.parse)((0,h.getLocationOrigin)(),!1,!0);return!t.host||t.protocol===n.protocol&&t.host===n.host}(l)){var i=window.location.pathname;l=(0,f.resolve)(i,l),a=a?(0,f.resolve)(i,a):l,e.preventDefault();var u=n.props.scroll;null==u&&(u=a.indexOf("#")<0),d.default[n.props.replace?"replace":"push"](l,a,{shallow:n.props.shallow}).then((function(e){e&&u&&(window.scrollTo(0,0),document.body.focus())}))}}},n.p=!1!==e.prefetch,n}return a(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.cleanUpListeners()}},{key:"getPaths",value:function(){var e=window.location.pathname,t=this.formatUrls(this.props.href,this.props.as),n=t.href,o=t.as,r=(0,f.resolve)(e,n);return[r,o?(0,f.resolve)(e,o):r]}},{key:"handleRef",value:function(e){var t=this;this.p&&y&&e&&e.tagName&&(this.cleanUpListeners(),b[this.getPaths().join("%")]||(this.cleanUpListeners=function(e,t){var n=w();return n?(n.observe(e),m.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}m.delete(e)}):function(){}}(e,(function(){t.prefetch()}))))}},{key:"prefetch",value:function(e){if(this.p){var t=this.getPaths();d.default.prefetch(t[0],t[1],e).catch((function(e){0})),b[t.join("%")]=!0}}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.formatUrls(this.props.href,this.props.as),o=n.href,r=n.as;"string"===typeof t&&(t=c.default.createElement("a",null,t));var s=c.Children.only(t),l={ref:function(t){e.handleRef(t),s&&"object"===typeof s&&s.ref&&("function"===typeof s.ref?s.ref(t):"object"===typeof s.ref&&(s.ref.current=t))},onMouseEnter:function(t){s.props&&"function"===typeof s.props.onMouseEnter&&s.props.onMouseEnter(t),e.prefetch({priority:!0})},onClick:function(t){s.props&&"function"===typeof s.props.onClick&&s.props.onClick(t),t.defaultPrevented||e.linkClicked(t)}};return!this.props.passHref&&("a"!==s.type||"href"in s.props)||(l.href=r||o),c.default.cloneElement(s,l)}}]),t}(c.Component);t.default=g},woBH:function(e,t,n){"use strict";n.r(t);var o=n("q1tI"),r=n.n(o),s=(n("YFqc"),r.a.createElement);t.default=function(){return s("div",{className:"page"},s("h1",null,"Other Response Types"),s("div",{className:"advanced"},s("span",{className:"emoji"},"\ud83d\udc81\u200d\u2640\ufe0f")," ",s("b",null,"Heads up!")," This is an advanced API that most people will not need to use."),s("p",null,"bestfetch assumes that all requests return JSON responses. If you have an endpoint that returns something other than JSON, then you must use the ",s("code",null,"responseType")," option when calling ",s("code",null,"bestfetch")," ","to configure how it will be parsed."),s("h2",null,"Using ",s("code",null,"responseType")),s("p",null,"The supported values for ",s("code",null,"responseType")," are all of the"," ",s("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Body#Methods"},"Body mixin methods"),":"),s("ul",null,s("li",null,s("code",null,'"json"'),": Returns the result of parsing the response text as JSON."),s("li",null,s("code",null,'"text"'),": Returns a string of the response body."),s("li",null,s("code",null,'"formData"'),": Returns a"," ",s("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/FormData"},"FormData")," ","object from the response body."),s("li",null,s("code",null,'"blob"'),": Returns a"," ",s("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Blob"},"Blob")," ","from the response body."),s("li",null,s("code",null,'"arrayBuffer"'),": Returns an"," ",s("a",{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"},"ArrayBuffer")," ","from the response body.")),s("p",null,"For more information on these options, please reference"," ",s("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Body#Methods"},"the Body mixin documentation")," ","on MDN."),s("p",null,"You may also pass a function as ",s("code",null,"responseType"),", which will be called with one argument, the ",s("code",null,"response"),". This allows you to inspect the response object before deciding how to parse it."),s("p",null,"The following example would support an endpoint that returns JSON for every request except for when the status code is ",s("code",null,"400"),"."),s("code",{className:"codeBlock"},"bestfetch('/api/books/2', {\n  responseType(res) {\n    if (res.status === 400) {\n      return 'text';\n    } else {\n      return 'json';\n    }\n  }\n})\n  .then(handlResponse);"))}}},[["bgQO",0,1,2]]]);