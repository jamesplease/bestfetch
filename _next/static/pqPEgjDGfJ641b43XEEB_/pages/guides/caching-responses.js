(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"1KBa":function(e,n,t){"use strict";function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var l=t("Ff2n"),r=t("q1tI"),i=t.n(r),a=t("YFqc"),s=t.n(a),c=i.a.createElement;n.a=function(e){var n=e.href,t=Object(l.a)(e,["href"]);return c(s.a,o({href:n,as:"".concat("/bestfetch").concat(n)},t))}},Ff2n:function(e,n,t){"use strict";function o(e,n){if(null==e)return{};var t,o,l=function(e,n){if(null==e)return{};var t,o,l={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}t.d(n,"a",(function(){return o}))},O2Tq:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/caching-responses",function(){return t("fZZe")}])},YFqc:function(e,n,t){e.exports=t("cTJO")},cTJO:function(e,n,t){"use strict";var o=t("lwsE"),l=t("W8MJ"),r=t("a1gu"),i=t("Nsbk"),a=t("7W2i"),s=t("TqRt"),c=t("284h");n.__esModule=!0,n.default=void 0;var u,h=c(t("q1tI")),f=t("QmWs"),d=t("g/15"),p=s(t("nOHt"));function v(e){return e&&"object"===typeof e?(0,d.formatWithValidation)(e):e}var g=new Map,w=window.IntersectionObserver,y={};function m(){return u||(w?u=new w((function(e){e.forEach((function(e){if(g.has(e.target)){var n=g.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(u.unobserve(e.target),g.delete(e.target),n())}}))}),{rootMargin:"200px"}):void 0)}var b=function(e){function n(e){var t;return o(this,n),(t=r(this,i(n).call(this,e))).p=void 0,t.cleanUpListeners=function(){},t.formatUrls=function(e){var n=null,t=null,o=null;return function(l,r){if(o&&l===n&&r===t)return o;var i=e(l,r);return n=l,t=r,o=i,i}}((function(e,n){return{href:v(e),as:n?v(n):n}})),t.linkClicked=function(e){var n=e.currentTarget,o=n.nodeName,l=n.target;if("A"!==o||!(l&&"_self"!==l||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&2===e.nativeEvent.which)){var r=t.formatUrls(t.props.href,t.props.as),i=r.href,a=r.as;if(function(e){var n=(0,f.parse)(e,!1,!0),t=(0,f.parse)((0,d.getLocationOrigin)(),!1,!0);return!n.host||n.protocol===t.protocol&&n.host===t.host}(i)){var s=window.location.pathname;i=(0,f.resolve)(s,i),a=a?(0,f.resolve)(s,a):i,e.preventDefault();var c=t.props.scroll;null==c&&(c=a.indexOf("#")<0),p.default[t.props.replace?"replace":"push"](i,a,{shallow:t.props.shallow}).then((function(e){e&&c&&(window.scrollTo(0,0),document.body.focus())}))}}},t.p=!1!==e.prefetch,t}return a(n,e),l(n,[{key:"componentWillUnmount",value:function(){this.cleanUpListeners()}},{key:"getPaths",value:function(){var e=window.location.pathname,n=this.formatUrls(this.props.href,this.props.as),t=n.href,o=n.as,l=(0,f.resolve)(e,t);return[l,o?(0,f.resolve)(e,o):l]}},{key:"handleRef",value:function(e){var n=this;this.p&&w&&e&&e.tagName&&(this.cleanUpListeners(),y[this.getPaths().join("%")]||(this.cleanUpListeners=function(e,n){var t=m();return t?(t.observe(e),g.set(e,n),function(){try{t.unobserve(e)}catch(n){console.error(n)}g.delete(e)}):function(){}}(e,(function(){n.prefetch()}))))}},{key:"prefetch",value:function(e){if(this.p){var n=this.getPaths();p.default.prefetch(n[0],n[1],e).catch((function(e){0})),y[n.join("%")]=!0}}},{key:"render",value:function(){var e=this,n=this.props.children,t=this.formatUrls(this.props.href,this.props.as),o=t.href,l=t.as;"string"===typeof n&&(n=h.default.createElement("a",null,n));var r=h.Children.only(n),i={ref:function(n){e.handleRef(n),r&&"object"===typeof r&&r.ref&&("function"===typeof r.ref?r.ref(n):"object"===typeof r.ref&&(r.ref.current=n))},onMouseEnter:function(n){r.props&&"function"===typeof r.props.onMouseEnter&&r.props.onMouseEnter(n),e.prefetch({priority:!0})},onClick:function(n){r.props&&"function"===typeof r.props.onClick&&r.props.onClick(n),n.defaultPrevented||e.linkClicked(n)}};return!this.props.passHref&&("a"!==r.type||"href"in r.props)||(i.href=l||o),h.default.cloneElement(r,i)}}]),n}(h.Component);n.default=b},fZZe:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return h}));var o=t("q1tI"),l=t.n(o),r=t("10ji"),i=t.n(r),a=t("lxlk"),s=t.n(a),c=t("1KBa"),u=l.a.createElement;function h(){return u("div",{className:"page"},u("h1",null,"Caching Responses"),u("p",null,"bestfetch includes a sophisticated system for caching responses."),u("h2",null,"Configuring the Caching Behavior"),u("p",null,"Use the ",u("code",null,"cachePolicy")," option when calling"," ",u("code",null,"bestfetch()")," to control when the cache is used. Supported values are:"),u("ul",null,u("li",null,u("code",null,'"cache-first"'),": The cache is checked to see if a response already exists for the request. If a response is found, then it will be returned, and no network request will be made. If no response exists in the cache, then a network request will be made."),u("li",null,u("code",null,'"network-only"'),": The cache is ignored, and a network request is always made."),u("li",null,u("code",null,'"cache-only"'),": If a response exists in the cache, then it will be returned. If no response exists in the cache, then the Promise will reject to a"," ",u(c.a,{href:"/api-reference/cache-miss-error"},u("a",null,"CacheMissError")),".")),u("p",null,"The following example shows how to specify the"," ",u("code",null,'"network-only"')," option:"),u(i.a,{language:"js",inline:!1,value:"bestfetch('/api/books/2', { cachePolicy: 'network-only' })\n  .then(res => {\n    console.log('Got the book', res.data);\n  });"}),u("h2",null,"The Default Behavior"),u("p",null,"The default value of ",u("code",null,"cache-policy")," is determined by the methed of the request:"),u("div",{className:s.a.grid},u("div",{className:s.a.gridTitle},"Method"),u("div",{className:s.a.gridTitle},u("code",null,"cachePolicy")),u("div",null,u("code",null,"GET")),u("div",null,u("code",null,'"cache-first"')),u("div",null,u("code",null,"POST")),u("div",null,u("code",null,'"network-only"')),u("div",null,u("code",null,"PUT")),u("div",null,u("code",null,'"network-only"')),u("div",null,u("code",null,"PATCH")),u("div",null,u("code",null,'"network-only"')),u("div",null,u("code",null,"DELETE")),u("div",null,u("code",null,'"network-only"'))),u("p",null,"The default value for less commonly used methods is:"),u("div",{className:s.a.grid},u("div",{className:s.a.gridTitle},"Method"),u("div",{className:s.a.gridTitle},u("code",null,"cachePolicy")),u("div",null,u("code",null,"HEAD")),u("div",null,u("code",null,'"cache-first"')),u("div",null,u("code",null,"OPTIONS")),u("div",null,u("code",null,'"cache-first"'))),u("h2",null,"When to Change This Behavior"),u("p",null,'The default behavior is designed to work for traditional "RESTful" APIs. There are a couple of common situations where this default will not work, and where you will need to specify ',u("code",null,"cachePolicy")," ","yourself:"),u("ul",null,u("li",null,u("b",null,"GraphQL"),": many GraphQL implementations use ",u("code",null,"POST")," for all requests (queries and for mutations)."),u("li",null,u("b",null,"REST APIs"),": Sometimes, APIs will use ",u("code",null,"POST")," for retrieving data instead of ",u("code",null,"GET"),".")),u("h2",null,"Cache Invalidation"),u("p",null,"Responses that are added to the cache are ",u("b",null,"never")," invalidated unless you configure how you would like for them to be invalidated. For more, refer to the guide on"," ",u(c.a,{href:"/guides/invalidating-the-cache"},u("a",null,"invalidating cached responses")),"."),u("h2",null,"Directly Accessing the Cache"),u("p",null,"There may come a time when you need to directly read or write to the response cache. You can use the ",u("code",null,"responseCache")," export from this library to do this. Learn more in the"," ",u(c.a,{href:"/api-reference/response-cache"},u("a",null,"API documentation for ",u("code",null,"responseCache"))),"."),u("h2",null,"Learn More"),u("p",null,"To learn more about how this algorithm works, and also how you can change its behavior, check out the"," ",u(c.a,{href:"/guides/identical-requests"},u("a",null,"Identical Requests"))," ","guide."))}},lxlk:function(e,n,t){e.exports={grid:"caching-responses_grid__jcBJ1",gridTitle:"caching-responses_gridTitle__nVNZF"}}},[["O2Tq",0,1,3,2]]]);