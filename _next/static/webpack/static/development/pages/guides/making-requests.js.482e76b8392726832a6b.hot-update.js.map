{"version":3,"file":"static/webpack/static/development/pages/guides/making-requests.js.482e76b8392726832a6b.hot-update.js","sources":["webpack:///./pages/guides/making-requests.js"],"sourcesContent":["import Lowlight from 'react-lowlight';\nimport Link from 'next/link';\n\nexport default () => {\n  return (\n    <div className=\"page\">\n      <h1>Making Requests</h1>\n      <p>\n        This guide will cover how to configure requests as well as how to handle\n        the responses that you receive.\n      </p>\n      <p>\n        To begin, import the <code>bestfetch</code> function:\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`import { bestfetch } from 'bestfetch';`}\n      />\n      <h2>Configuring Requests</h2>\n      <p>\n        <code>bestfetch</code> supports all of the same options as{' '}\n        <code>fetch</code>.\n      </p>\n      <p>\n        In fact, because bestfetch is a lightweight wrapper around fetch, it can\n        be beneficial for you to be familiar with that API. If you're new to\n        fetch, you may wish to read the{' '}\n        <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\">\n          Using Fetch guide on MDN\n        </a>\n        .\n      </p>\n      <h3>Specifying the URL</h3>\n      <p>\n        You can pass a URL as the first argument, or you can pass an{' '}\n        <code>options</code> object and specify the URL there. URLs can be both\n        absolute or relative.\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/todos/1')\n  .then(handleResponse);\n\nbestfetch({\n  url: '/api/books/2'\n})\n  .then(handleResponse);`}\n      />\n      <h3>Specifying the HTTP Method</h3>\n      <p>\n        Pass the <code>method</code> option. For instance, to make a{' '}\n        <code>POST</code> request:\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/todos/1', {\n  method: 'post'\n})\n  .then(handleResponse);`}\n      />\n      <p>\n        The <code>method</code> option is case-insensitive, so both{' '}\n        <code>\"POST\"</code> and <code>\"post\"</code> work.\n      </p>\n      <h3>Sending Data in the Request Body</h3>\n      <p>\n        Use the <code>body</code> option to send data to the server. To do this,\n        stringify your data and pass the correct headers so that the server\n        knows how to parse the data:\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch({\n  url: 'https://jsonplaceholder.typicode.com/todos/1',\n  method: 'post',\n  body: JSON.stringify(data),\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n  .then(handleResponse);`}\n      />\n      <h3>Sending Query Parameters</h3>\n      <p>\n        Include query parameters in the <code>url</code>.\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('/api/books?sort=author')\n  .then(handleResponse);`}\n      />\n      <p>\n        You may find it preferable to use a library that stringifies query\n        parameters from an object. The following example shows how you can use{' '}\n        <code>bestfetch</code> with{' '}\n        <a href=\"https://github.com/sindresorhus/query-string\">\n          <code>query-string</code>\n        </a>\n        :\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`import queryString from 'query-string';\n\nconst qs = queryString.stringify({ sort: 'author' });\n\nbestfetch(\\`/api/books?\\${qs}\\`)\n  .then(handleResponse);`}\n      />\n      <h3>Configuring the Caching Behavior</h3>\n      <p>\n        <code>bestfetch</code> will intelligently cache your responses to reduce\n        network requests. Refer to the guide on{' '}\n        <Link href=\"/guides/caching-responses\">\n          <a>Caching Responses</a>\n        </Link>{' '}\n        to learn how to configure this behavior.\n      </p>\n      <h3>Other Options</h3>\n      <p>\n        <code>bestfetch</code> supports all of the same options as{' '}\n        <code>fetch</code>, including:\n      </p>\n      <ul>\n        <li>\n          <code>method</code>\n        </li>\n        <li>\n          <code>headers</code>\n        </li>\n        <li>\n          <code>body</code>\n        </li>\n        <li>\n          <code>mode</code>\n        </li>\n        <li>\n          <code>credentials</code>\n        </li>\n        <li>\n          <code>cache</code>{' '}\n          <i>\n            (note: this is not unrelated to the caching system of bestfetch)\n          </i>\n        </li>\n        <li>\n          <code>redirect</code>\n        </li>\n        <li>\n          <code>referrer</code>\n        </li>\n        <li>\n          <code>referrerPolicy</code>\n        </li>\n        <li>\n          <code>integrity</code>\n        </li>\n        <li>\n          <code>keepalive</code>\n        </li>\n        <li>\n          <code>signal</code>\n        </li>\n      </ul>\n      <p>\n        So far, this guide has covered the most commonly-used options. For more\n        information on these other options, refer to{' '}\n        <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch\">\n          the <code>fetch()</code> documentation\n        </a>{' '}\n        on MDN.\n      </p>\n      <p>\n        In addition to the options that come from <code>fetch</code>, there are\n        additional options introduced in bestfetch. These are used for the\n        caching and deduplication features.\n      </p>\n      <ul>\n        <li>\n          <code>cachePolicy</code>\n        </li>\n        <li>\n          <code>dedupe</code>\n        </li>\n        <li>\n          <code>responseType</code>\n        </li>\n        <li>\n          <code>requestKey</code>\n        </li>\n      </ul>\n      <h2>Receiving Responses</h2>\n      <p>\n        <code>bestfetch</code> returns a Promise. This Promise resolves if a\n        response from the server or cache is received, and it rejects otherwise.\n      </p>\n      <h3>Successful Respones</h3>\n      <p>\n        When a response is successful you can access the data from the response\n        on <code>res.data</code>.\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/todos/1')\n  .then(res => {\n    console.log('Got the data', res.data);\n  });`}\n      />\n      <h3>Errors</h3>\n      <p>\n        If the server replies with an error response, then the Promise will\n        still resolve. This is important to note, because it may be surprising\n        to you. If your server utilizes HTTP status codes, then you can check\n        for server errors with the following code:\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/todos/1')\n  .then(res => {\n    if (res.ok) {\n      console.log('The request was successful');\n    } else {\n      console.log('The request was unsuccessful.');\n    }\n  });`}\n      />\n      <p>If no response is received, then the promise will reject.</p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/todos/1')\n  .catch(err => {\n    console.log('Another kind of error occurred.', err);\n  });`}\n      />\n      <p>\n        The Promise will also reject with a{' '}\n        <Link href=\"/api/cachemisserror\">\n          <a>CacheMissError</a>\n        </Link>{' '}\n        if the <code>cachePolicy</code> of the request is set to{' '}\n        <code>\"cache-only\"</code> and nothing was found in the cache.\n      </p>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/todos/1', {\n  cachePolicy: 'cache-only'\n})\n  .catch(err => {\n    if (typeof err === CacheMissError) {\n      console.log('This request did not having a response in the cache.');\n    }\n  });`}\n      />\n      <h2>Trying It Out</h2>\n      <p>\n        This webpage has <code>bestfetch</code> available on the window for you\n        to use. You can try it out by making requests to{' '}\n        <a href=\"https://jsonplaceholder.typicode.com/\">\n          the JSON Placeholder API\n        </a>\n        .\n      </p>\n      <p>Here are a few examples to get you started.</p>\n      <h3>Fetching a Resource</h3>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/todos/1')\n  .then(res => {\n    console.log('Got the todo', res.data);\n  });`}\n      />\n      <h3>Creating a Resource</h3>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/posts', {\n    method: 'post',\n    body: JSON.stringify({\n      title: 'My first post',\n      body: 'This is a draft post.',\n      userId: 1\n    }),\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\"\n    }\n  })\n  .then(res => console.log('Created:', res.data));`}\n      />\n      <h3>Updating a Resource</h3>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/posts/1', {\n    method: 'put',\n    body: JSON.stringify({\n      id: 1,\n      title: 'foo',\n      body: 'bar',\n      userId: 1\n    }),\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\"\n    }\n  })\n  .then(res => console.log('Updated:', res.data));`}\n      />\n      <h3>Deleting a Resource</h3>\n      <Lowlight\n        language=\"js\"\n        inline={false}\n        value={`bestfetch('https://jsonplaceholder.typicode.com/posts/1', {\n  method: 'delete'\n})`}\n      />\n      <h3>Other Examples</h3>\n      <p>\n        Check out{' '}\n        <a href=\"https://jsonplaceholder.typicode.com/guide.html\">\n          the JSON Placeholder examples\n        </a>{' '}\n        for more inspiration.\n      </p>\n    </div>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;A","sourceRoot":""}