(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"1KBa":function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("Ff2n"),i=n("q1tI"),s=n.n(i),a=n("YFqc"),l=n.n(a),u=s.a.createElement;t.a=function(e){var t=e.href,n=Object(o.a)(e,["href"]);return u(l.a,r({href:t,as:"".concat("/bestfetch").concat(t)},n))}},E6IJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/identical-requests",function(){return n("zMMs")}])},Ff2n:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,"a",(function(){return r}))},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var r=n("lwsE"),o=n("W8MJ"),i=n("a1gu"),s=n("Nsbk"),a=n("7W2i"),l=n("TqRt"),u=n("284h");t.__esModule=!0,t.default=void 0;var c,f=u(n("q1tI")),h=n("QmWs"),p=n("g/15"),d=l(n("nOHt"));function v(e){return e&&"object"===typeof e?(0,p.formatWithValidation)(e):e}var y=new Map,g=window.IntersectionObserver,b={};function w(){return c||(g?c=new g((function(e){e.forEach((function(e){if(y.has(e.target)){var t=y.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(c.unobserve(e.target),y.delete(e.target),t())}}))}),{rootMargin:"200px"}):void 0)}var m=function(e){function t(e){var n;return r(this,t),(n=i(this,s(t).call(this,e))).p=void 0,n.cleanUpListeners=function(){},n.formatUrls=function(e){var t=null,n=null,r=null;return function(o,i){if(r&&o===t&&i===n)return r;var s=e(o,i);return t=o,n=i,r=s,s}}((function(e,t){return{href:v(e),as:t?v(t):t}})),n.linkClicked=function(e){var t=e.currentTarget,r=t.nodeName,o=t.target;if("A"!==r||!(o&&"_self"!==o||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&2===e.nativeEvent.which)){var i=n.formatUrls(n.props.href,n.props.as),s=i.href,a=i.as;if(function(e){var t=(0,h.parse)(e,!1,!0),n=(0,h.parse)((0,p.getLocationOrigin)(),!1,!0);return!t.host||t.protocol===n.protocol&&t.host===n.host}(s)){var l=window.location.pathname;s=(0,h.resolve)(l,s),a=a?(0,h.resolve)(l,a):s,e.preventDefault();var u=n.props.scroll;null==u&&(u=a.indexOf("#")<0),d.default[n.props.replace?"replace":"push"](s,a,{shallow:n.props.shallow}).then((function(e){e&&u&&(window.scrollTo(0,0),document.body.focus())}))}}},n.p=!1!==e.prefetch,n}return a(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.cleanUpListeners()}},{key:"getPaths",value:function(){var e=window.location.pathname,t=this.formatUrls(this.props.href,this.props.as),n=t.href,r=t.as,o=(0,h.resolve)(e,n);return[o,r?(0,h.resolve)(e,r):o]}},{key:"handleRef",value:function(e){var t=this;this.p&&g&&e&&e.tagName&&(this.cleanUpListeners(),b[this.getPaths().join("%")]||(this.cleanUpListeners=function(e,t){var n=w();return n?(n.observe(e),y.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}y.delete(e)}):function(){}}(e,(function(){t.prefetch()}))))}},{key:"prefetch",value:function(e){if(this.p){var t=this.getPaths();d.default.prefetch(t[0],t[1],e).catch((function(e){0})),b[t.join("%")]=!0}}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.formatUrls(this.props.href,this.props.as),r=n.href,o=n.as;"string"===typeof t&&(t=f.default.createElement("a",null,t));var i=f.Children.only(t),s={ref:function(t){e.handleRef(t),i&&"object"===typeof i&&i.ref&&("function"===typeof i.ref?i.ref(t):"object"===typeof i.ref&&(i.ref.current=t))},onMouseEnter:function(t){i.props&&"function"===typeof i.props.onMouseEnter&&i.props.onMouseEnter(t),e.prefetch({priority:!0})},onClick:function(t){i.props&&"function"===typeof i.props.onClick&&i.props.onClick(t),t.defaultPrevented||e.linkClicked(t)}};return!this.props.passHref&&("a"!==i.type||"href"in i.props)||(s.href=o||r),f.default.cloneElement(i,s)}}]),t}(f.Component);t.default=m},zMMs:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var r=n("q1tI"),o=n.n(r),i=n("10ji"),s=n.n(i),a=n("1KBa"),l=o.a.createElement;function u(){return l("div",{className:"page"},l("h1",null,"Identical Requests"),l("p",null,"bestfetch's"," ",l(a.a,{href:"/guides/deduplicating-requests"},l("a",null,"request deduplication"))," ","and"," ",l(a.a,{href:"/guides/caching-responses"},l("a",null,"response caching"))," ","features work by determining which requests are ",l("b",null,"identical"),". This guide explains when requests are identical, and it also covers how you can change this behavior."),l("h2",null,"Determining Identical Requests"),l("p",null,"This library looks at the following pieces of information about a request:"),l("ul",null,l("li",null,"The URL"),l("li",null,"The request body"),l("li",null,"The request method (i.e.; ",l("code",null,"GET"),")"),l("li",null,"The ",l("code",null,"responseType"))),l("p",null,"bestfetch combines these pieces of information into a string called a"," ",l("code",null,"requestKey"),". Requests with the same ",l("code",null,"requestKey")," ","are identical."),l("p",null,"This algorithm is exported from this library as"," ",l(a.a,{href:"/api-reference/get-request-key"},l("a",null,l("code",null,"getRequestKey"))),"."),l("h2",null,"Specifying a ",l("code",null,"requestKey")),l("div",{className:"advanced"},l("span",{className:"emoji"},"\ud83d\udc81\u200d\u2640\ufe0f")," ",l("b",null,"Heads up!")," This is an advanced API that few applications should ever need to use."),l("p",null,"In rare situations, you may wish to have control over when two requests are considered to be identical. You can do this by specifying the"," ",l("code",null,"requestKey")," when calling ",l("code",null,"bestfetch"),"."),l("p",null,"By default, a ",l("code",null,"requestKey")," is generated for you, but you may pass your own to override this behavior."),l(s.a,{language:"js",inline:!1,value:"bestfetch('/api/books/2', { requestKey: 'my-custom-key' })\n  .then(res => {\n    console.log('Received the book:', res);\n  });"}),l("p",null,"Be careful when specifying your own request keys \u2013\xa0it will affect the behavior of both request deduplication and response caching!"))}}},[["E6IJ",0,1,3,2]]]);