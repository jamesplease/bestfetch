(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"1KBa":function(e,n,l){"use strict";function t(){return(t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e}).apply(this,arguments)}var o=l("Ff2n"),r=l("q1tI"),s=l.n(r),u=l("YFqc"),a=l.n(u),c=s.a.createElement;n.a=function(e){var n=e.href,l=Object(o.a)(e,["href"]);return c(a.a,t({href:n,as:"".concat("/bestfetch").concat(n)},l))}},DiTi:function(e,n,l){"use strict";l.r(n);var t=l("q1tI"),o=l.n(t),r=l("10ji"),s=l.n(r),u=l("1KBa"),a=o.a.createElement;n.default=function(){return a("div",{className:"page"},a("h1",null,a("code",null,"responseCache")),a("p",null,"An object that allows direct read and write access to the response cache."),a(s.a,{language:"js",inline:!1,value:"import { responseCache } from 'bestfetch';"}),a("p",null,a("code",null,"responseCache")," has the following methods:"),a("ul",null,a("li",null,a("a",{href:"#get"},a("b",null,a("code",null,"get")))),a("li",null,a("a",{href:"#set"},a("b",null,a("code",null,"set")))),a("li",null,a("a",{href:"#has"},a("b",null,a("code",null,"has")))),a("li",null,a("a",{href:"#delete"},a("b",null,a("code",null,"delete")))),a("li",null,a("a",{href:"#clear"},a("b",null,a("code",null,"clear")))),a("li",null,a("a",{href:"#usecachedresponse"},a("b",null,a("code",null,"useCachedResponse"))))),a("h2",{id:"get"},a("code",null,"get")),a("p",null,"Retrieve the cached response for a given ",a("code",null,"requestKey"),"."),a("h3",null,"Arguments"),a("ol",null,a("li",null,a("b",null,a("code",null,"requestKey")),": The request key of the response to retrieve from the cache.")),a("h3",null,"Returns"),a("p",null,"A ",a("code",null,"response"),", if one exists. If no response exists in the cache for the specified ",a("code",null,"requestKey"),", then"," ",a("code",null,"undefined")," will be returned instead."),a("h3",null,"Example Usage"),a(s.a,{language:"js",inline:!1,value:"responseCache.get('my-request-key');"}),a("h2",{id:"set"},a("code",null,"set")),a("p",null,"Set the cached ",a("code",null,"response")," for a particular"," ",a("code",null,"requestKey"),"."),a("h3",null,"Arguments"),a("ol",null,a("li",null,a("b",null,a("code",null,"requestKey")),": The request key of the request."),a("li",null,a("b",null,a("code",null,"response")),": The response to associate with the ",a("code",null,"requestKey"),".")),a("h3",null,"Returns"),a("p",null,"The ",a("code",null,"responseCache")," object."),a("h3",null,"Example Usage"),a(s.a,{language:"js",inline:!1,value:"responseCache.set('my-request-key', response);"}),a("h2",{id:"has"},a("code",null,"has")),a("p",null,"Used to determine if a response exists in the cache for"," ",a("code",null,"requestKey"),"."),a("h3",null,"Arguments"),a("ol",null,a("li",null,a("b",null,a("code",null,"requestKey")),": The ",a("code",null,"requestKey")," to check.")),a("h3",null,"Returns"),a("p",null,"A ",a("code",null,"boolean")," representing whether or not a response exists in the cache for ",a("code",null,"requestKey"),"."),a("h3",null,"Example Usage"),a(s.a,{language:"js",inline:!1,value:"responseCache.has('my-request-key');"}),a("h2",{id:"delete"},a("code",null,"delete")),a("p",null,"Used to delete a response from the cache for ",a("code",null,"requestKey"),"."),a("h3",null,"Arguments"),a("ol",null,a("li",null,a("b",null,a("code",null,"requestKey")),": The ",a("code",null,"requestKey")," to delete from the cache.")),a("h3",null,"Returns"),a("p",null,"A ",a("code",null,"boolean")," that is ",a("code",null,"true")," when a response was found and deleted from the cache, and ",a("code",null,"false")," when a response did not exist in the cache."),a("h3",null,"Example Usage"),a(s.a,{language:"js",inline:!1,value:"responseCache.delete('my-request-key');"}),a("h2",{id:"clear"},a("code",null,"clear")),a("p",null,"Removes all responses from the cache."),a("h3",null,"Arguments"),a("p",null,"This method does not accept any arguments."),a("h3",null,"Returns"),a("p",null,"This method does not return anything."),a("h3",null,"Example Usage"),a(s.a,{language:"js",inline:!1,value:"responseCache.clear();"}),a("h2",{id:"usecachedresponse"},a("code",null,"useCachedResponse")),a("p",null,"Configure the invalidation strategy for your application. You should only call this method one time, when your app first loads."),a("h3",null,"Arguments"),a("ol",null,a("li",null,a("b",null,a("code",null,"cacheInvalidationPolicy")),": A function that defines your invalidation policy. Each time that the cache would be hit, this function will be called. It is passed a single argument: ",a("code",null,"cacheObject"),". Return ",a("code",null,"true")," to use the cached object, or ",a("code",null,"false")," to invalidate it.")),a("p",null,"A ",a("code",null,"cacheObject")," has the following shape:"),a("ul",null,a("li",null,a("code",null,"createdAt"),": A timestamp (in milliseconds) when the response was added to the cache."),a("li",null,a("code",null,"lastAccessedAt"),": A timecode (in milliseconds) when this response was last read from the cache."),a("li",null,a("code",null,"accessCount"),": How many times the response has been read from the cache."),a("li",null,a("code",null,"res"),": The cached response.")),a("h3",null,"Returns"),a("p",null,"This method does not return anything."),a("h3",null,"Example Usage"),a(s.a,{language:"js",inline:!1,value:"// 1000 = 1 second in milliseconds\n// * 60 = 1 minute\n// * 10 = 10 minutes\nconst TEN_MINUTES = 1000 * 60 * 10;\n\nresponseCache.useCachedResponse(cacheObject => {\n  const currentTimestamp = Date.now();\n  return currentTimestamp - cacheObject.createdAt <= TEN_MINUTES;\n});"}),"For more on how to use this method, refer to the"," ",a(u.a,{href:"/guides/invalidating-the-cache"},a("a",null,"Invalidating the Cache"))," ","guide.")}},Ff2n:function(e,n,l){"use strict";function t(e,n){if(null==e)return{};var l,t,o=function(e,n){if(null==e)return{};var l,t,o={},r=Object.keys(e);for(t=0;t<r.length;t++)l=r[t],n.indexOf(l)>=0||(o[l]=e[l]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)l=r[t],n.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(o[l]=e[l])}return o}l.d(n,"a",(function(){return t}))},YFqc:function(e,n,l){e.exports=l("cTJO")},cTJO:function(e,n,l){"use strict";var t=l("lwsE"),o=l("W8MJ"),r=l("a1gu"),s=l("Nsbk"),u=l("7W2i"),a=l("TqRt"),c=l("284h");n.__esModule=!0,n.default=void 0;var i,h=c(l("q1tI")),p=l("QmWs"),d=l("g/15"),f=a(l("nOHt"));function m(e){return e&&"object"===typeof e?(0,d.formatWithValidation)(e):e}var g=new Map,v=window.IntersectionObserver,y={};function w(){return i||(v?i=new v((function(e){e.forEach((function(e){if(g.has(e.target)){var n=g.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(i.unobserve(e.target),g.delete(e.target),n())}}))}),{rootMargin:"200px"}):void 0)}var b=function(e){function n(e){var l;return t(this,n),(l=r(this,s(n).call(this,e))).p=void 0,l.cleanUpListeners=function(){},l.formatUrls=function(e){var n=null,l=null,t=null;return function(o,r){if(t&&o===n&&r===l)return t;var s=e(o,r);return n=o,l=r,t=s,s}}((function(e,n){return{href:m(e),as:n?m(n):n}})),l.linkClicked=function(e){var n=e.currentTarget,t=n.nodeName,o=n.target;if("A"!==t||!(o&&"_self"!==o||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&2===e.nativeEvent.which)){var r=l.formatUrls(l.props.href,l.props.as),s=r.href,u=r.as;if(function(e){var n=(0,p.parse)(e,!1,!0),l=(0,p.parse)((0,d.getLocationOrigin)(),!1,!0);return!n.host||n.protocol===l.protocol&&n.host===l.host}(s)){var a=window.location.pathname;s=(0,p.resolve)(a,s),u=u?(0,p.resolve)(a,u):s,e.preventDefault();var c=l.props.scroll;null==c&&(c=u.indexOf("#")<0),f.default[l.props.replace?"replace":"push"](s,u,{shallow:l.props.shallow}).then((function(e){e&&c&&(window.scrollTo(0,0),document.body.focus())}))}}},l.p=!1!==e.prefetch,l}return u(n,e),o(n,[{key:"componentWillUnmount",value:function(){this.cleanUpListeners()}},{key:"getPaths",value:function(){var e=window.location.pathname,n=this.formatUrls(this.props.href,this.props.as),l=n.href,t=n.as,o=(0,p.resolve)(e,l);return[o,t?(0,p.resolve)(e,t):o]}},{key:"handleRef",value:function(e){var n=this;this.p&&v&&e&&e.tagName&&(this.cleanUpListeners(),y[this.getPaths().join("%")]||(this.cleanUpListeners=function(e,n){var l=w();return l?(l.observe(e),g.set(e,n),function(){try{l.unobserve(e)}catch(n){console.error(n)}g.delete(e)}):function(){}}(e,(function(){n.prefetch()}))))}},{key:"prefetch",value:function(e){if(this.p){var n=this.getPaths();f.default.prefetch(n[0],n[1],e).catch((function(e){0})),y[n.join("%")]=!0}}},{key:"render",value:function(){var e=this,n=this.props.children,l=this.formatUrls(this.props.href,this.props.as),t=l.href,o=l.as;"string"===typeof n&&(n=h.default.createElement("a",null,n));var r=h.Children.only(n),s={ref:function(n){e.handleRef(n),r&&"object"===typeof r&&r.ref&&("function"===typeof r.ref?r.ref(n):"object"===typeof r.ref&&(r.ref.current=n))},onMouseEnter:function(n){r.props&&"function"===typeof r.props.onMouseEnter&&r.props.onMouseEnter(n),e.prefetch({priority:!0})},onClick:function(n){r.props&&"function"===typeof r.props.onClick&&r.props.onClick(n),n.defaultPrevented||e.linkClicked(n)}};return!this.props.passHref&&("a"!==r.type||"href"in r.props)||(s.href=o||t),h.default.cloneElement(r,s)}}]),n}(h.Component);n.default=b},hwNv:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/api-reference/response-cache",function(){return l("DiTi")}])}},[["hwNv",0,1,3,2]]]);